<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Circuit Theory - MUST Smart Library</title>
    <!-- Link to CSS file in same directory -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Top Navigation Bar -->
    <header class="header">
        <div class="container">
            <!-- Logo -->
            <div class="logo">
                <img class="logo-img" src="/images/logo.png" alt="logo">
                <span class="logo-text">MUST Smart Library</span>
            </div>

            <!-- Navigation Menu -->
            <nav class="nav-menu">
                <a href="/" class="nav-item">Home</a>
                <a href="/must_student_dashboard/index.html" class="nav-item active">Dashboard</a>
                <a href="#" class="nav-item">Reservations</a>
            </nav>

            <!-- Search and User -->
            <div class="nav-right">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" placeholder="Search textbooks, authors..." class="search-input">
                </div>
                <div class="user-avatar">üë§</div>
            </div>
        </div>
    </header>

    <!-- Breadcrumb Navigation -->
    <div class="breadcrumb">
        <div class="container">
            <a href="#">Home</a>
            <span>/</span>
            <a href="#">Library Catalog</a>
            <span>/</span>
            <a href="#">Engineering</a>
            <span>/</span>
            <span class="current">Advanced Circuit Theory</span>
        </div>
    </div>

    <!-- Main Content Area -->
    <main class="main-content">
        <div class="container">
            <div class="book-layout">
                <!-- Left Side: Book Cover and Actions -->
                <div class="book-sidebar">
                    <!-- Book Cover -->
                    <div class="book-cover">
                        <div class="cover-content">
                            <p class="cover-title">Advanced<br>Circuit<br>Theory</p>
                        </div>
                    </div>

                    <!-- Status Badge -->
                    <div class="badge-section">
                        <span class="badge recommended">Engineering Core</span>
                    </div>

                    <!-- Action Buttons -->
                    <div class="action-buttons">
                        <button class="btn-primary">Borrow Book</button>

                    </div>

                    <!-- Availability Status -->
                    <div class="availability">
                        <div class="status-indicator">
                            <span class="status-dot available"></span>
                            <span class="status-text">Currently Available</span>
                        </div>
                        <p class="status-detail">Shelf 18, Copy#6 left - 3 physical copies remaining</p>
                    </div>
                </div>

                <!-- Right Side: Book Details -->
                <div class="book-details">
                    <!-- Book Title and Info -->
                    <h1 class="book-title">Advanced Circuit Theory & Analysis</h1>
                    <p class="book-author">Engr. Dr. Ahmed Malik & Sarah Johnson</p>
                    <p class="book-department">Department of Electrical Engineering | MUST Mirpur Campus</p>

                    <!-- AI Insights Section -->
                    <div class="insights-section">
                        <div class="insights-header">
                            <span class="insights-icon">‚ú®</span>
                            <h3>AI Book Insights & Relevance</h3>
                        </div>

                        <!-- Summary Tab -->
                        <div class="tabs">
                            <button class="tab active">Summary</button>
                            <button class="tab">Topics Covered</button>
                        </div>

                        <!-- Summary Content -->
                        <div class="summary-content">
                            <p>
                                This comprehensive textbook covers the fundamental concepts of circuit analysis,
                                including nodal and mesh analysis, Thevenin's and Norton's theorems, and frequency-state
                                circuit analysis. Second edition includes new sections on digital circuit integration
                                and power system efficiency. Aligned with the MUST Electrical of Electrical
                                Engineering curriculum.
                            </p>

                            <!-- Why Study Section -->
                            <div class="why-study">
                                <h4>üí° Why study this book?</h4>
                                <p>
                                    <strong>Matches with your FE-302 alignment</strong> with your upcoming mid-term
                                    exams in (21 days). This textbook is directly aligned with the Semester project
                                    requirements.
                                </p>
                            </div>


                        </div>

                        <!-- Topics Covered -->
                        <div class="topics-section">
                            <h4>Topics Covered</h4>
                            <div class="topics-tags">
                                <span class="topic-tag">Laplace Transforms</span>
                                <span class="topic-tag">Fourier Series</span>
                                <span class="topic-tag">AC/DC Analysis</span>
                                <span class="topic-tag">Network Graphs</span>
                            </div>

                            <!-- Warning Box -->
                            <div class="warning-box">
                                <span class="warning-icon">‚ö†Ô∏è</span>
                                <div>
                                    <strong>Limited Stock Warning</strong>
                                    <p>Only books left. 14 students are in line</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recommended Books Section -->
                    <div class="recommended-section">
                        <div class="section-header">
                            <h3>Recommended for Engineering Students</h3>
                            <a href="#" class="view-all">View all</a>
                        </div>

                        <!-- Recommended Books Grid -->
                        <div class="recommended-grid">
                            <!-- Book 1 -->
                            <div class="mini-book">
                                <div class="mini-cover" style="background: linear-gradient(135deg, #3498db, #2980b9);">
                                    <span class="available-badge">Available</span>
                                </div>
                                <h4>Microelectronic Circuits</h4>
                                <p>Sedra & Smith</p>
                            </div>

                            <!-- Book 2 -->
                            <div class="mini-book">
                                <div class="mini-cover" style="background: linear-gradient(135deg, #3498db, #2c3e50);">
                                    <span class="available-badge">Available</span>
                                </div>
                                <h4>Signals and Systems</h4>
                                <p>Oppenheim, Willsky</p>
                            </div>

                            <!-- Book 3 -->
                            <div class="mini-book">
                                <div class="mini-cover" style="background: linear-gradient(135deg, #34495e, #2c3e50);">
                                    <span class="reserved-badge">Reserved</span>
                                </div>
                                <h4>Control Systems Eng.</h4>
                                <p>Nise</p>
                            </div>

                            <!-- Book 4 -->
                            <div class="mini-book">
                                <div class="mini-cover" style="background: linear-gradient(135deg, #2c3e50, #000);">
                                    <span class="available-badge">Available</span>
                                </div>
                                <h4>Digital Logic Design</h4>
                                <p>Morris Mano</p>
                            </div>

                            <!-- Book 5 -->
                            <div class="mini-book">
                                <div class="mini-cover" style="background: linear-gradient(135deg, #95a5a6, #7f8c8d);">
                                    <span class="reserved-badge">Reserved</span>
                                </div>
                                <h4>Power Electronics</h4>
                                <p>Muhammad H. Rashid</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>¬© 2024 Mirpur University of Science and Technology. All rights reserved.</p>
            <div class="footer-links">
                <a href="#">Library Policy</a>
                <a href="#">Help Center</a>
                <a href="#">Contact Librarian</a>
            </div>
        </div>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const urlParams = new URLSearchParams(window.location.search);
            const bookId = urlParams.get('id');

            if (!bookId) {
                alert('No book ID provided');
                window.location.href = '/must_student_dashboard/index.html';
                return;
            }

            try {
                const response = await fetch(`/api/books/${bookId}`);
                const data = await response.json();

                if (data.success) {
                    const book = data.book;

                    // Update Title
                    document.title = `${book.title} - MUST Smart Library`;
                    document.querySelectorAll('.book-title').forEach(el => el.textContent = book.title);
                    document.querySelector('.current').textContent = book.title;

                    // Update Author and Dept
                    document.querySelector('.book-author').textContent = book.author;
                    document.querySelector('.book-department').textContent = `${book.department} | MUST Mirpur Campus`;

                    // Update Cover
                    const cover = document.querySelector('.book-cover');
                    if (book.image_url) {
                        cover.style.background = 'white';
                        cover.innerHTML = `<img src="${book.image_url}" alt="${book.title}" style="width: 100%; height: 100%; object-fit: contain;">`;
                    } else {
                        cover.style.background = book.cover_color || 'linear-gradient(135deg, #1e3c72, #2a5298)';
                        document.querySelector('.cover-title').innerHTML = book.title.replace(/ /g, '<br>');
                    }

                    // Update Description
                    document.querySelector('.summary-content p').textContent = book.description;

                    // Update Shelf and Availability
                    document.querySelector('.status-detail').textContent = `${book.shelf_location}, Copy#${Math.floor(Math.random() * 10)} left - ${book.available_copies} physical copies remaining`;

                    if (book.available_copies > 0) {
                        document.querySelector('.status-dot').className = 'status-dot available';
                        document.querySelector('.status-text').textContent = 'Currently Available';
                    } else {
                        document.querySelector('.status-dot').className = 'status-dot reserved';
                        document.querySelector('.status-text').textContent = 'Currently Checked Out';
                        document.querySelector('.btn-primary').textContent = 'Notify Me';
                        document.querySelector('.btn-primary').disabled = true;
                        document.querySelector('.btn-primary').style.opacity = '0.5';
                    }

                    // Update Topics
                    if (book.topics) {
                        const topicsContainer = document.querySelector('.topics-tags');
                        topicsContainer.innerHTML = book.topics.split(',').map(topic =>
                            `<span class="topic-tag">${topic.trim()}</span>`
                        ).join('');
                    }

                } else {
                    alert('Book not found');
                }
            } catch (error) {
                console.error('Error fetching book details:', error);
            }
        });
    </script>
</body>

</html>